@page "/ProfileDashboard"
@using DomainModels
@inject AppState AppState
@inject HttpClient HttpClient
@inject NavigationManager NavigationManager

<h3>Profile Dashboard</h3>

@if (profile != null)
{
    <p>Id: @profile.Id</p>
    <p>Name: @profile.Name</p>
    <p>Email: @profile.Email</p>
    <p>Birthday: @profile.Birthday?.ToShortDateString()</p>
    <p>Address: @profile.Address</p>
    <p>Phone Number: @profile.PhoneNumber</p>

    //Edit Profile Button
    <button @onclick="EditProfile">Edit Profile</button>
}
else
{
    <p>Loading...</p>
}

@code {
    private Profile? profile;

    protected override async Task OnInitializedAsync()
    {
        if (AppState.LoggedIn)
        {
            profile = await HttpClient.GetFromJsonAsync<Profile>($"api/profile/{AppState.UserId}");
        }
    }

    private void EditProfile()
    {
        
        NavigationManager.NavigateTo($"/EditProfile/{profile?.Id}");
    }
}
